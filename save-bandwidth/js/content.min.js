function remove_videos(){page_url=$(location).attr("href"),page_url.match(/\/videos\/\d+/gi)||page_url.match(/\/posts\/\d+/gi)||page_url.match(/permalink\.php/gi)||$.each($("video"),function(){changeVideoSource($(this)),video_original_link=getSharedVideoLink($(this)),video_grand_parent=$(this).parents().eq(4),parent_div=$(this).closest("div"),video_image_holder=$(parent_div).find("img"),$(video_grand_parent).wrap(function(){return"<a href='{0}' target='_blank' title='{1}'></a>".format(video_original_link,title)}),$(this).remove()})}function getSharedVideoLink(e){return user_content_wrapper=e.closest("div.userContentWrapper"),$(user_content_wrapper).find("span.timestampContent").closest("a").attr("href")}function changeVideoSource(e){videoTag=$(e).find("source").context,id="video#"+videoTag.id,video=$(id).get(0),video.src="",video.load()}function waitAndRemoveVideo(){setTimeout(function(){remove_videos()},5e3)}title="Click to open the video",String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}),chrome.runtime.onMessage.addListener(function(e){"remove_videos"===e.message&&waitAndRemoveVideo()}),waitAndRemoveVideo();