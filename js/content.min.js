function remove_videos(){page_url=$(location).attr("href"),page_url.match(/\/videos\/\d+/gi)||$.each($("video"),function(){changeVideoSource($(this)),video_original_link=getSharedVideoLink($(this)),video_grand_parent=$(this).parents().eq(4),parent_div=$(this).closest("div"),video_image_holder=$(parent_div).find("img"),$(video_grand_parent).wrap(function(){return"<a href='{0}' target='_blank' title='"+title+"'></a>".format(video_original_link)})})}function getSharedVideoLink(e){return user_content_wrapper=e.closest("div.userContentWrapper"),video_link_node=$(user_content_wrapper).find("h5 span.fcg a.profileLink").last(),link=video_link_node.attr("href"),link?link:getPostedVideoLink(user_content_wrapper)}function getPostedVideoLink(e){return video_link_from_timestamp=$(e).find("span.timestampContent").closest("a").attr("href"),video_link_from_timestamp?video_link_from_timestamp:"#"}function changeVideoSource(e){videoTag=$(e).find("source").context,id="video#"+videoTag.id,video=$(id).get(0),video.src="",video.load()}function waitAndRemoveVideo(){setTimeout(function(){remove_videos()},5e3)}title="Click to open the video",String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(i,o){return"undefined"!=typeof e[o]?e[o]:i})}),chrome.runtime.onMessage.addListener(function(e){console.log(e),"remove_videos"===e.message&&(console.log("Received message"),waitAndRemoveVideo())}),waitAndRemoveVideo();